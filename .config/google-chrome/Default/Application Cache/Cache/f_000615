PC.prototype.Gi=ea(114,function(){return S(this,2)});yN.prototype.Gi=ea(113,g("F"));gZ.prototype.Gi=ea(112,function(){return S(this,1)});jZ.prototype.Gi=ea(111,function(){return S(this,1)});kZ.prototype.Gi=ea(110,function(){return S(this,2)});oZ.prototype.Gi=ea(109,function(){return S(this,1)});wZ.prototype.Gi=ea(108,function(){return S(this,1)});yZ.prototype.Gi=ea(107,function(){return S(this,1)});
CZ.prototype.Gi=ea(106,function(a){var b=this,c=new Qz;c.ji=!0;var d=c.serialize(a);return new Qe(function(a,f){DZ(b,"/dbx/getExecutionStatus",d,function(b){c.ji=!1;b=c.qd(wZ.Ba(),b.$e());a(b)},function(){f()})})});function aie(a,b){U(a,3,b)}function bie(a,b){var c=new Qz;c.ji=!0;var d=c.serialize(b);return new Qe(function(b,f){DZ(a,"/dbx/createQuery",d,function(a){c.ji=!1;a=c.qd(gZ.Ba(),a.$e());3==a.Gi().getState()?f(a):b(a)},function(){var a=new gZ,b=new Zz;U(a,1,b);b.ub(3);U(b,2,1);f(a)})})}
function cie(a,b){var c=new Qz;c.ji=!0;var d=c.serialize(b);return new Qe(function(b,f){DZ(a,"/dbx/previewQuery",d,function(a){c.ji=!1;a=c.qd(jZ.Ba(),a.$e());3==a.Gi().getState()?f(a):b(a)},function(){var a=new jZ,b=new Zz;U(a,1,b);b.ub(3);U(b,2,1);f(a)})})}
function die(a,b){var c=new Qz;c.ji=!0;var d=c.serialize(b);return new Qe(function(e,f){DZ(a,"/dbx/refreshSheets",d,function(a){c.ji=!1;a=c.qd(tfd.Ba(),a.$e());Uv(a,1).some(function(a){return 3==a.Gi().getState()})?f(a):e(a)},function(){var a=new tfd,c=new Zz;c.ub(3);U(c,2,1);Uv(b,1).forEach(function(b){var d=new kZ;U(d,1,b);U(d,2,c);Sv(a,1,d)});f(a)})})}
function eie(a,b){var c=new Qz;c.ji=!0;var d=c.serialize(b);return new Qe(function(b,f){DZ(a,"/dbx/getDbPivotResult",d,function(a){c.ji=!1;a=c.qd(yZ.Ba(),a.$e());3==a.Gi().getState()?f(a):b(a)},function(){var a=new yZ,b=new Zz;U(a,1,b);b.ub(3);U(b,2,1);f(a)})})}
function fie(a,b){var c=new Qz;c.ji=!0;var d=c.serialize(b);return new Qe(function(b,f){DZ(a,"/dbx/editQuery",d,function(a){c.ji=!1;a=c.qd(oZ.Ba(),a.$e());3==a.Gi().getState()?f(a):b(a)},function(){var a=new oZ,b=new Zz;U(a,1,b);b.ub(3);U(b,2,1);f(a)})})}function gie(a){var b=new Qz;return new Qe(function(c,d){Aw(ou(Bw(xx(pu(a.C.sf("/dbx/listConnections"),"GET")),1).setTimeout(3E4),function(a){b.ji=!1;a=b.qd(Cfd.Ba(),a.$e());c(a)}),d).Te()})}
function hie(a,b){var c=new Qz;c.ji=!0;var d=Io(c.serialize(b));return new Qe(function(b,f){Aw(ou(lx(Bw(xx(pu(a.C.sf("/dbx/getQuery"),"POST")),1).setTimeout(3E4),["data",d]),function(a){c.ji=!1;a=c.qd(Pfd.Ba(),a.$e());S(a,1)?b(a):f("Query is not found")}),f).Te()})}
function iie(a,b){var c=new Qz;c.ji=!0;var d=c.serialize(b);return new Qe(function(b,f){DZ(a,"/dbx/getBigQueryProjects",d,function(a){c.ji=!1;a=c.qd(uZ.Ba(),a.$e());a.Ou()&&f(a);b(a)},function(){var a=new jZ,b=new Zz;U(a,1,b);b.ub(3);U(b,2,1);f(a)})})}function jie(a){var b=CZ.getInstance(),c=new Qz;c.ji=!0;var d=c.serialize(a);return new Qe(function(a,f){DZ(b,"/dbx/hasBigQueryQueryResults",d,function(b){c.ji=!1;b=c.qd(AZ.Ba(),b.$e());b.bt()||f(b);a(b)},function(){var a=new AZ;U(a,1,!1);f(a)})})}
function kie(a,b){var c=new Qz;c.ji=!0;var d=c.serialize(b);return new Qe(function(b,f){DZ(a,"/dbx/getConnection",d,function(a){c.ji=!1;a=c.qd(Wfd.Ba(),a.$e());b(a)},function(){f()})})}function lie(a){nf(this,a,0,-1,null,null)}w(lie,lf);function mie(a){this.C=a}mie.prototype.getSelection=g("C");function nie(a,b,c){b=void 0===b?"":b;c=void 0===c?"dataconnector-querytype-raw":c;this.C=[];for(var d=0;d<a.length;d++)this.C.push(a[d].clone());this.F=b;this.D=c};function oie(){var a='<div class="'+Q("waffle-dataconnector-footer-sharing-message")+'">';return P(a+'<span>The data you query is visible to everyone with view access, but your query is only visible to people with edit access. <a href="https://support.google.com/docs/answer/9077536" target="_blank">Learn more</a></span></div>')};function pie(a){a=a.fGb;var b='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-section")+'"><h3 class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-header")+'">';b=b+"Billing project"+('</h3><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper")+'"></div>'+(a?'<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-radio-group")+'"><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")+
'"></div><div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")+'"></div></div>':"")+"</div>");return P(b)}function qie(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper")+'"><p>';a=a+'Your use of BigQuery is governed by the Google Cloud Platform <a href="https://cloud.google.com/terms/" target="_blank">Terms of Service</a>.'+("</p></div>"+O(oie(null,b)));return P(a)};function rie(){return P('<svg class="waffle-dataconnector-database-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#000" fill-rule="evenodd"><ellipse cx="9" cy="5" rx="7" ry="3"/><path d="M16,7 L16,8.99999983 C16,10.6568542 12.8659932,12 9,12 C5.13400675, 12 2,10.6568542 2,9 L2,7 C2,8.65685425 5.13400675,10 9,10 C12.8659932,10 16,8.65685425 16,7 Z"/><path d="M16,11 L16,12.9999998 C16,14.6568542 12.8659932,16 9,16 C5.13400675,16 2,14.6568542 2,13 L2,11 C2,12.6568542 5.13400675,14 9,14 C12.8659932,14 16,12.6568542 16,11 Z"/></g></svg>')}
function sie(a){a=a||{};var b=a.color;a="";b=Ps(b,null)?"#D0021B":b;a+='<svg class="waffle-dataconnector-error-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="'+Q(b)+'" fill-rule="evenodd" d="M9,13 L11,13 L11,15 L9,15 L9,13 Z M9,5 L11,5 L11,11 L9,11 L9,5 Z M9.99,0 C4.47,0 0,4.48 0,10 C0,15.52 4.47,20 9.99,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 9.99,0 Z M10,18 C5.58,18 2,14.42 2,10 C2,5.58 5.58,2 10,2 C14.42,2 18,5.58 18,10 C18,14.42 14.42,18 10,18 Z"></path></g></svg>';
return P(a)}
function tie(){return P('<svg class="waffle-dataconnector-bigquery-icon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="#000000" fill-rule="evenodd" d="M17.6210231,14.9676464 C17.7267041,14.964158 17.8336481,14.999598 17.9136667,15.0739664 L21.2187334,18.1431672 C21.3715333,18.2853017 21.3715333,18.5181274 21.2187334,18.6604475 L19.8908,19.8929813 C19.7375334,20.0356729 19.4867333,20.0356729 19.3334666,19.8929813 L16.0288667,16.8252043 C15.9483809,16.7504669 15.9100327,16.6511429 15.9138223,16.5530387 C14.5318646,17.5088871 12.8185327,18.0746254 10.962963,18.0746254 C6.38121025,18.0746254 2.66666667,14.6253786 2.66666667,10.3707987 C2.66666667,6.11585235 6.38121025,2.66666667 10.962963,2.66666667 C15.5447814,2.66666667 19.259325,6.11585235 19.2592593,10.3708597 C19.2592593,12.0936892 18.6501585,13.6844725 17.6210231,14.9676464 Z M10.9627632,16.1481946 C14.3991593,16.1481946 17.1851852,13.5615621 17.1851852,10.3706486 C17.1851852,7.17973497 14.3992258,4.59254616 10.9627632,4.59254616 C7.52630064,4.59254616 4.74074074,7.17967314 4.74074074,10.3706486 C4.74074074,13.561624 7.52630064,16.1481946 10.9627632,16.1481946 Z M6.81481481,10.3703704 L8.88888889,10.3703704 L8.88888889,14.0029401 C8.03391111,13.6464441 7.31942754,13.1505168 6.81481481,12.5594013 L6.81481481,10.3703704 Z M9.92592593,8.44442896 L12,8.44442896 L12,14.1665272 C11.6766072,14.200082 11.3475683,14.2222532 11.0093815,14.2222532 C10.6390341,14.2222532 10.2784063,14.1975885 9.92592593,14.1574203 L9.92592593,8.44442896 Z M13.044326,11.3333411 L15.1184,11.3333411 L15.1184,12.4901418 C14.6287957,13.0790718 13.9116201,13.5742789 13.044326,13.933362 L13.044326,11.3333411 Z"></path></g></svg>')}
function uie(a){a=a||{};var b=a.opacity;a="";b=Ps(b,null)?1:b;a+='<svg class="waffle-dataconnector-menu-icon" fill="#000000" fill-opacity="'+Q(b)+'" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>';return P(a)};function vie(){var a=P,b='<div class="'+Q("waffle-dataconnector-modal-header")+'"><div class="'+Q("waffle-dataconnector-modal-title")+'" role="heading"></div><div class="'+Q("waffle-dataconnector-modal-close-button")+'" tabindex="0" role="button">';var c=P('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>');
return a(b+c+'</div></div><div class="'+Q("waffle-dataconnector-modal-body")+'"></div><div class="'+Q("waffle-dataconnector-modal-footer")+'"></div>')};function H4(a,b){a=void 0===a?"":a;ht.call(this,!1,b);this.Ab=a;this.C=new es(void 0,wie.getInstance());this.Ga(this.C);this.C.Ag("Close");this.tb=null;this.ib=!0}r(H4,ht);p=H4.prototype;
p.Ca=function(){ht.prototype.Ca.call(this);var a=this.getId();Kk(this.Oa(),"labelledby",a);Jk(this.Oa(),"dialog");J(this.getElement(),"waffle-dataconnector-modal");this.Ab&&J(this.getElement(),this.Ab);Fs(this.getElement(),vie);this.Ja("waffle-dataconnector-modal-title").id=a;a=this.yp();J(a,"waffle-dataconnector-modal-bg");K(a,this.ib);this.C.Va(this.Ja("waffle-dataconnector-modal-close-button"));this.tb&&xie(this)};
p.Ha=function(){ht.prototype.Ha.call(this);yie(this);this.getHandler().V(this.C,"action",this.aZ);this.getHandler().V(this.Oa(),["keydown","keypress"],this.KKb)};p.rb=function(){return this.fb("waffle-dataconnector-modal-body")};function zie(a){return a.fb("waffle-dataconnector-modal-footer")}function Aie(a,b){a.tb=b;a.sb()&&xie(a)}function yie(a){var b=a.qa(),c=a.yp(),d=a.Tp;a.ib?(d&&b.$r(d,a.getElement()),b.$r(c,a.getElement())):(b.Gf(d),b.Gf(c))}p.aZ=function(){Avb.xb()};p.f7=function(){Avb.xb()};
p.KKb=function(a){"keydown"==a.type?27==a.keyCode?this.f7():9==a.keyCode&&a.shiftKey&&a.target==this.getElement()&&hSa(this):this.VGa(a)};function xie(a){Sl.getInstance().setContent(a.Ja("waffle-dataconnector-modal-title"),a.tb)}p.VGa=ba();function wie(){}r(wie,ds);wie.prototype.iq=m("waffle-dataconnector-modal-close-button");wa(wie);function I4(a,b){H4.call(this,a,b);this.H=Ve()}r(I4,H4);p=I4.prototype;p.getResult=function(){return this.H.C};p.resolve=function(a){this.H.resolve(a)};p.reject=function(a){this.H.reject(a)};p.Ia=function(){H4.prototype.Ia.call(this);this.H.reject()};p.f7=function(){this.reject()};p.aZ=function(){this.reject()};var Bie=new Yu(1);function Cie(a){var b=1024<=a;a=b?n6c(parseInt(a,10)):a;return(new $u("{AT_LEAST_ONE_KB, select, \n     true {Will process {BYTES}.}\n     other {\n         {BYTES, plural,\n             =0 {Will process # bytes.}\n             =1 {Will process # byte.}\n             other {Will process # bytes.}}}}")).format({AT_LEAST_ONE_KB:b?"true":"false",BYTES:a})}
function Die(){var a=new or,b="Configure a project in the Google Cloud Platform console to continue. "+(a.ue("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.xe("a")));return a.format(b)};function Eie(a,b){I4.call(this,"waffle-dataconnector-bigqueryquerysettingsdialog",b);Aie(this,this.qa().Ca("SPAN",void 0,N(tie),"BigQuery data connection"));this.J=a.C;this.D=new hV;this.Ga(this.D);this.D.Gd("waffle-dataconnector-bigqueryquerysettingsdialog-project-select");this.D.Ag("Billing project");AQa(this.D,"Select a project");this.L=new SX(this.qa(),"Raw data");this.R=new SX(this.qa(),"Pivot table");this.O=new TX([this.L,this.R]);this.F=new BZ("Write query");this.Ga(this.F);this.F.Gd("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button")}
r(Eie,I4);
Eie.prototype.Ca=function(){I4.prototype.Ca.call(this);var a=I(H(),"fedp");Fs(this.rb(),pie,{fGb:a});zie(this).appendChild(N(qie));this.D.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper"));this.F.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper"));a&&(this.L.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")),this.R.render(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")),UX(this.O,
this.L))};Eie.prototype.Ha=function(){I4.prototype.Ha.call(this);if(0==this.J.length){this.D.Na(!1);AQa(this.D,"No billing projects");var a=this.qa(),b=qe(a,Die());a.appendChild(this.Ja("waffle-dataconnector-bigqueryquerysettingsdialog-project-section"),a.Ca("DIV","waffle-dataconnector-bigqueryquerysettingsdialog-error-caption",b))}else{a=this.J;for(b=0;b<a.length;b++){var c=a[b];this.D.hd(new Cn(Fie(c),c.getId()))}this.getHandler().V(this.F,"action",this.Da).V(this.D,"change",this.va)}this.va()};
Eie.prototype.va=function(){this.F.Na(null!=this.D.bf())};Eie.prototype.Da=function(){this.resolve(Gie(this))};function Gie(a){var b=a.D.bf().getValue(),c="dataconnector-querytype-raw";I(H(),"fedp")&&"Pivot table"==VX(a.O).getLabel()&&(c="dataconnector-querytype-pivot");return new nie(a.J,b,c)}function Fie(a){var b=a.getName();a=a.getId();return b+" ["+a+"]"};function Hie(a){this.C=a}function Iie(a){var b=new Jfd;return iie(a.C,b).then(function(a){return Uv(a,4)})};function Jie(a){z.call(this);this.F=a;this.D=new E;this.Aa(this.D);this.C=[]}r(Jie,z);function Kie(a){return 0<a.C.length?Ta(a.C):null}function J4(a,b,c){void 0===c||c?Lie(a):(c=Kie(a))&&c.setVisible(!1);b.Nd(a.D);b instanceof it?a.F.oi(b):(c=new aMb(b),c.Nd(a.D),a.F.oi(c));b.render();b.setVisible(!0);a.C.push(b)}function Mie(a){var b=a.C.pop();for(A(b);0<a.C.length;)if(b=Ta(a.C),b.isDisposed())a.C.pop();else{b.setVisible(!0);break}}
function Lie(a){for(var b=ja(a.C),c=b.next();!c.done;c=b.next())A(c.value);a.C=[]}Jie.prototype.Ia=function(){Lie(this);z.prototype.Ia.call(this)};function Nie(a,b,c,d){z.call(this);this.R=a;this.ea=b;this.ma=c;this.J=this.L=null;this.H=d||null;this.C=3;this.O=new Oie;this.D=this.F=null}r(Nie,z);p=Nie.prototype;p.getId=function(){return Da(this)};p.Ia=function(){this.stop();z.prototype.Ia.call(this)};p.start=function(){this.C=2;this.D=this.F=null;this.mBa(this.R)};p.stop=function(){2==this.C&&(this.C=3,this.O.stop())};function Pie(a,b){a.L=b;return a}function Qie(a,b){a.J=b;return a}
p.mBa=function(a){var b=this;this.ea.call(this.H,a).then(function(a){if(2==b.C){b.F=a;b.D=null;var c=b.ma.call(b.H,a);if(c){a:{a=b.O;c=u(b.mBa,b,c);if(10>a.F){a.F++;var e=1E3}else if(60>a.D)a.D++,e=5E3;else{a=!1;break a}e+=Math.round(.2*e*(Math.random()-.5)*2);a.C=cm(c,e);a=!0}a||Rie(b,Error("Polling timed out"))}else b.stop(),b.C=4,b.F=a,b.D=null,b.L&&b.L.call(b.H,a)}},function(a){2==b.C&&Rie(b,a)})};function Rie(a,b){a.stop();a.C=1;a.F=null;a.D=b;a.J&&a.J.call(a.H,b)}p.getStatus=g("C");p.kG=g("D");
function Oie(){this.D=this.F=0;this.C=null}Oie.prototype.stop=function(){this.D=this.F=0;em(this.C);this.C=null};function Sie(a){this.C=a}function Tie(a,b){var c=S(b,1);return new Nie(b,function(b){return cie(a.C,b)},function(a){if(1==a.Gi().getState()){var b=new hZ;U(b,1,c);b.setToken(a.Gi().getToken());return b}return null})};function Uie(a,b){et(a.Nc,Vie(a));a.C="vertical"==a.D?SRa(a.Nc,b):TRa(a.Nc,b);var c=ja("vertical"==a.D?[a.C,0]:[0,a.C]);b=c.next().value;c=c.next().value;eI(a.Oa(),b,c,a.qe());a.dispatchEvent("Tg")}function Vie(a){var b=a.Oa().parentElement.getBoundingClientRect(),c=b.height;b=b.width;"horizontal"==a.D?(b=0,c-=a.Zc()):(c=0,b-=a.Zc());return new $k(0,0,b,c)};function Wie(a,b){var c=b.getErrorCode(),d=S(b,3);switch(c){case 20:return Xie(a,d);case 14:return K4('Update parameter "'+(S(b,6).toUpperCase()+'" to reference a cell in the current workbook and try again'));case 15:return K4('Update the cell referenced by parameter "'+(S(b,6).toUpperCase()+'" to be text or a number'));case 16:return K4("Select a parameter name you haven't used before");case 13:return K4('Define your parameter "'+(S(b,6).toUpperCase()+'" and try again'));case 6:return I(H(),"docs-idu")?
(a=new or,b=a.ue("span",{"class":"waffle-dataconnector-error-message"})+("Query timed out. "+(a.ue("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+(a.xe("a")+a.xe("span"))))),a=a.format(b)):a=Yie("Query timed out",d),a;case 8:return I(H(),"docs-idu")?(a=new or,b="Results exceed "+(Zie+(" rows. Update query and run again. "+(a.ue("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.xe("a"))))),a=a.format(b),a=K4(a)):
a=Yie($ie,d),a;case 18:return K4("The query returns an ARRAY or a STRUCT type, which is currently not supported.");case 9:return a=new or,b="Go to Plx to specify an engine other than 'Auto' and try again. "+(a.ue("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.xe("a"))),a=a.format(b),K4(a);case 19:return K4("The query is already in execution.");case 17:return a="Can not insert the results of the query: that would increase the number of cells in the workbook above the limit of "+
(eh(H(),"fmtc")+" cells."),K4(a);case 22:return K4("Duplicated column names or aliases are not supported. Please update your query.");case 23:return K4("There is no sheet associated with this query.");case 24:return K4("Can not insert the results of the query: exceeds the maximum characters allowed in a single cell.")}return aje(d)}
function bje(a){var b=new or;a=(new $u("To execute this query, {startLink}sign in to your Google account{endLink}")).format({startLink:b.ue("a",{href:"#",id:a}),endLink:b.xe("a")});return b.format(a)}function Xie(a,b){if(!b)return aje(b);switch(a){case 2:return K4("Plx error: "+b);case 3:return K4("BigQuery error: "+b);default:return K4("Database error: "+b)}}function aje(a){return Yie("Something's wrong. Please try again later",a)}var Zie=(new Yu(1)).format(1E4),$ie="Results exceed "+(Zie+" rows. Update query and run again.");
function K4(a){return bd("span",{"class":"waffle-dataconnector-error-message"},a)}function Yie(a,b){var c=new or;b&&(a=a+": "+b);return K4(c.format(a))};function cje(a){switch(a){case 2:var b=1;break;case 3:b=2;break;case 1:b=3;break;default:b=0}a=new lie;G(a,1,b);b=new ik;yf(b,91,a);return b};function dje(){}r(dje,ds);dje.prototype.Rb=m("waffle-dataconnector-queryeditor-removable-chip-remove-button");wa(dje);function eje(){}r(eje,ds);eje.prototype.Ca=function(a){var b=ds.prototype.Ca.call(this,a);a.qa().appendChild(b,a.qa().Ca("DIV","waffle-dataconnector-queryeditor-removable-chip-chip-content"));return b};eje.prototype.rb=function(a){return Hd("waffle-dataconnector-queryeditor-removable-chip-chip-content",a)};eje.prototype.Rb=m("waffle-dataconnector-queryeditor-removable-chip-button");
wa(eje);var fje=new Qz;function gje(a){return a.C.Bd().map(function(a){return a.Ra()})};function hje(){z.call(this);this.C=Ld()}r(hje,z);function ije(a,b){a.C.dataConnectorOnCompleteAuth=b;b=(new qo(a.C.location.href)).resolve(new qo("dbx/ssoLogin")).toString();var c=Jd();(a=rr(b,{target:"google_popup",width:500,height:500,top:Math.floor((c.height-500)/2),left:Math.floor((c.width-500)/2),toolbar:!1,menubar:!1,location:!1,statusbar:!1},a.C))&&a.focus()}hje.prototype.Ia=function(){delete this.C.dataConnectorOnCompleteAuth;z.prototype.Ia.call(this)};function jje(a){var b=a.Qia(),c;if(c=b){a=ja(gje(a.Wa));for(c=a.next();!c.done;c=a.next())Sv(b,3,c.value);c=b}return c}function kje(a){a.J.setVisible(!0);var b=Math.min(a.J.fdb().height+16,240);lje(a,b)}function mje(a){if(!a.O.enabled){var b=0;nje(a,b);a.O.V("tick",function(){a.isDisposed()||(b+=.1,nje(a,b))});a.O.start()}}function nje(a,b){L4(a,Zc("Executing query "+(b.toFixed(1)+"s")))}function oje(a,b){a.Ua=!1;a.O.stop();a.O.ED();pje(a,!0);qje(a,b.Gi());rje(a)}
function qje(a,b){10==b.getErrorCode()?sje(a):L4(a,Wie(a.kD(),b))}function tje(a){a.Ua=!0;L4(a,Zc("Updating workbook"));rje(a)}function lje(a,b){var c=void 0===c?!0:c;A(a.Da);a.Da=null;c?(c=uje(a),a.Da=new vje(c,b,200,a),a.Aa(a.Da),a.Da.play()):wje(a,b)}function uje(a){return a.sb()?ul(a.Ja("waffle-dataconnector-newqueryeditor-preview-pane")).height:0}function wje(a,b){var c=a.Ja("waffle-dataconnector-newqueryeditor-main");b=ul(c).height-a.F.Zc()-b;Uie(a.F,b)}
function rje(a){var b=jje(a),c=a.Za.C;a.Ua||null==b||c?(a.La.Na(!1),a.va.Na(!1)):(a.va.Na(!0),a.La.Na(!0));b=a.eb&&a.eb.equals(b);a.J.oqa(!b)}function xje(a){var b=new hZ;a=jje(a);U(b,1,a);U(b,2,30);return b}function sje(a){var b="waffle-dataconnector-ssologin-"+$b(),c=bje(b);L4(a,c);(b=Ed(b))&&a.getHandler().V(b,"click",function(){return yje(a)})}function yje(a){ije(a.Gc,function(){pje(a,!1);qF.xb(xje(a),a.gx)})}
function L4(a,b,c){c=void 0===c?!0:c;a=a.Ja("waffle-dataconnector-newqueryeditor-footer-message");fd(a,b);c&&uJ(fe(a))}function pje(a,b){a.sb()&&Tk(a.Ja("waffle-dataconnector-newqueryeditor-footer-message-container"),"waffle-dataconnector-newqueryeditor-unhandled-error",b)}function vje(a,b,c,d){Ju.call(this,[a],[b],c);this.D=d}r(vje,Ju);vje.prototype.N9=function(){wje(this.D,this.coords[0])};vje.prototype.aT=function(){wje(this.D,this.AP[0])};
var zje=new or,Aje="Inserted data is visible to all. The query is visible only to people with edit access. "+(zje.ue("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+zje.xe("a"))),Bje=zje.format(Aje);function Cje(a,b,c){b=c||b;b="<div id="+Vs(a.id)+' class="'+Q("waffle-dataconnector-dbschematreenode")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-label")+(a.Wb?" waffle-dataconnector-dbschematreenode-rtl":"")+'"><div class="'+Q("waffle-dataconnector-dbschematreenode-spinner-container")+'">'+O(yPb({zb:!0},b))+"</div>";c=P('<svg class="waffle-dataconnector-expand-icon" width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><polygon id="Shape" points="0 0 18 0 18 18 0 18"></polygon><polygon id="Shape" fill-opacity="0.87" fill="#000000" points="5 7 9 11 13 7"></polygon></g></g></svg>');
a=b+O(c)+'<div class="'+Q("waffle-dataconnector-dbschematreenode-title")+'">'+O(a.title)+'</div></div><div class="'+Q("waffle-dataconnector-dbschematreenode-child-container")+'" role="group"></div></div>';return P(a)};function Dje(a){this.C=a}Dje.prototype.getType=g("C");function Eje(a){this.C="jdbc-table";this.D=a}r(Eje,Dje);function M4(a,b,c,d){c=void 0===c?!1:c;M.call(this,d);this.Yb(b);this.J=a;this.nextSibling=this.previousSibling=this.parentNode=null;this.H=(this.D=c)?2:0;this.F=this.C=!1}r(M4,M);p=M4.prototype;p.Ca=function(){this.kb(N(Cje,{title:this.J,id:this.getId()}))};p.rb=function(){return this.fb("waffle-dataconnector-dbschematreenode-child-container")};
p.Ha=function(){M.prototype.Ha.call(this);var a=this.Ja("waffle-dataconnector-dbschematreenode-label"),b=this.Ja("waffle-dataconnector-dbschematreenode-title");a.id=this.getId()+"-label";Kk(this.Oa(),"labelledby",a.id);this.D||Kk(this.Oa(),"expanded",this.C);Kk(this.Oa(),"selected",this.F);Jk(this.Oa(),"treeitem");Jk(this.Ja("waffle-dataconnector-dbschematreenode-spinner-container"),"presentation");Jk(this.Ja("waffle-dataconnector-expand-icon"),"presentation");Tk(this.Oa(),"waffle-dataconnector-dbschematreenode-rtl",
this.qe());Kva(this.qa());vm(b,this.J,void 0);Fje(this,!1);Tk(this.Oa(),"waffle-dataconnector-dbschematreenode-leaf",this.D);this.getHandler().V(a,"click",this.LKb)};p.getTitle=g("J");p.LKb=function(){this.Hd(!this.C);this.Zb(!0)};p.Hd=function(a){if(!this.D&&a!=this.C){var b=iva(64,a);this.dispatchEvent(b)&&Fje(this,a)}};function Fje(a,b){a.D||(a.C=b,a.sb()&&(Tk(a.Oa(),"waffle-dataconnector-dbschematreenode-open",a.C),Kk(a.Oa(),"expanded",a.C)))}
p.Zb=function(a){if(a!=this.F){var b=iva(8,a);this.dispatchEvent(b)&&(this.F=a,this.sb()&&(Tk(this.Oa(),"waffle-dataconnector-dbschematreenode-selected",this.F),Kk(this.Oa(),"selected",a)))}};p.Ye=g("C");p.Io=g("H");p.Yb=function(a){M.prototype.Yb.call(this,a)};p.Ra=function(){return M.prototype.Ra.call(this)};p.Yc=function(a){return M.prototype.Yc.call(this,a)};p.Oc=function(a){return M.prototype.Oc.call(this,a)};
p.Ga=function(a,b){if(this.D)throw Error("Can't add child to leaf node");M.prototype.Ga.call(this,a,b)};function Gje(a){a.parentNode=null;var b=a.previousSibling,c=a.nextSibling;a.previousSibling=null;a.nextSibling=null;b&&(b.nextSibling=c);c&&(c.previousSibling=b)}p.eg=function(a,b,c){if(this.D)throw Error("Can't add child to leaf node");var d=this.Oc(b-1),e=this.Oc(b);a.parentNode=this;a.nextSibling=e;if(a.previousSibling=d)d.nextSibling=a;e&&(e.previousSibling=a);M.prototype.eg.call(this,a,b,c)};
p.removeChild=function(a,b){Gje(a);return M.prototype.removeChild.call(this,a,b)};p.yd=function(){return M.prototype.yd.call(this,!0)};p.po=function(a){return M.prototype.po.call(this,a,!0)};function Hje(a){var b=a.C.yd(!0);xb(b);Ije(a,!1)}function Ije(a,b){a.sb()&&K(a.Ja("waffle-dataconnector-schema-menu-error-message"),b)};function Jje(a){Hje(a);a.F.setActive(!0);a.H.H().then(function(b){a.F.setActive(!1);b.forEach(function(b){b=b.getName();b=new M4(b,new Eje(b));Ije(a,!1);a.C.Ga(b,!0)});0==b.length&&Ije(a,!0)},function(){a.F.setActive(!1);Ije(a,!0)})};var Kje=Object.freeze({caption:"Dremel",value:"DREMEL"}),Lje=Object.freeze({caption:"F1",value:"F1"}),Mje=Object.freeze({caption:"Procella",value:"PROCELLA"});function N4(a,b){it.call(this,"waffle-dataconnector-prompt",a,b);this.L=Ve();ut(this,null);tt(this,!0);this.C=new jM("Continue");this.Ga(this.C);this.J=new GV("Cancel");this.Ga(this.J);this.O=[]}r(N4,it);p=N4.prototype;p.Gd=function(a){this.O.push(a);var b=this.getElement();b&&J(b,a)};p.getResult=function(){return this.L.C};p.resolve=function(a){this.L.resolve(a)};p.reject=function(){this.L.reject()};p.Ca=function(){it.prototype.Ca.call(this);var a=nt(this);this.J.render(a);this.C.render(a);K(a,!0)};
p.Ha=function(){var a=this;it.prototype.Ha.call(this);Qk(this.Oa(),this.O);this.getHandler().V(this.J,"action",function(){return a.reject()})};p.setVisible=function(a){it.prototype.setVisible.call(this,a);a||this.reject()};p.Ia=function(){it.prototype.Ia.call(this);this.reject()};function Nje(a,b,c,d,e,f){z.call(this);var h=this;this.va=a;this.F=CZ.getInstance();this.Da=new Sie(this.F);this.R=c;this.ea=f;this.C=new Jie(c);this.O=new we(this);this.Aa(this.O);Oje(this,e);Pje(this);this.L=new Ze;NE("queryeditor",function(){var c=QE("queryeditor");h.L.callback(c.C(d,a,h.F,h.R,h.ea,b))})}r(Nje,z);function Oje(a,b){Avb.Na(!0);zvb.Na(!0);a.Twa(b)}function Pje(a){a.O.subscribe(Avb,"action",function(){Mie(a.C)}).subscribe(zvb,"action",a.rvb);a.FRa()}p=Nje.prototype;p.xf=function(a){this.F.xf(a)};
p.a4a=function(){var a=Qje("Connecting to Plx...");Rje(this);kr(jr.getInstance(),a)};p.$3a=function(){var a=this,b=Qje("Connecting to BigQuery...");Iie(new Hie(this.F)).then(function(c){kr(jr.getInstance(),b);Sje(a,c)},function(){kr(jr.getInstance(),b);Tje("Could not connect to BigQuery")})};function Sje(a,b){b=new nie(b);var c=new Eie(b);a.Aa(c);J4(a.C,c);c.getResult().then(function(b){Uje(a,b)},function(){a.ea.C(35753);A(c)})}
function Qje(a){return jr.getInstance().postMessage(lr(a,"info",!0))}function Tje(a){jr.getInstance().postMessage(lr(a,"error",!0))}function Uje(a,b){a.L.addCallback(function(c){c=c.Fcb(b);a.Aa(c);J4(a.C,c)})}function Rje(a){a.L.addCallback(function(b){b=b.Hcb();a.Aa(b);J4(a.C,b)})}
p.FHa=function(a){var b=Kie(this.C);b.Ua=!0;L4(b,Zc("Executing query"));rje(b);mje(b);var c=S(a,1);Qie(Pie(Tie(this.Da,a),function(a){if(!b.isDisposed()){b.O.stop();b.O.ED();pje(b,!1);b.Ua=!1;b.eb=c;if(!b.isDisposed()){var d=S(a,3);d=S(a,4)?"Query successful (only the first "+(Bie.format(1E4)+" rows will be shown)"):1E4>d?(new $u("{TOTAL_ROWS, plural, =0 {No results}=1 {1 row returned}other {# rows returned}}")).format({TOTAL_ROWS:d}):Bie.format(d)+(" rows (only the first "+(Bie.format(1E4)+" rows will be shown)"));
d=bd("strong",void 0,d);d=cd(d,bd("br"),Bje);L4(b,d)}b.J.JRb(S(a,2));kje(b);b.va.setContent("Refresh preview");rje(b)}}),function(a){b.isDisposed()||oje(b,a)}).start()};p.rvb=function(){rr("https://cloud.google.com/bigquery/docs/projects")};function Vje(a,b){N4.call(this,a,b)}r(Vje,N4);Vje.prototype.Ha=function(){var a=this;N4.prototype.Ha.call(this);this.getHandler().V(this.C,"action",function(){return a.resolve(0)})};function Wje(a){return P('<div class="'+Q("waffle-dataconnector-connectioncard")+'" role="button" tab-index="0"><div class="'+Q("waffle-dataconnector-connectioncard-icon")+'"></div><div class="'+Q("waffle-dataconnector-connectioncard-body")+'"><div class="'+Q("waffle-dataconnector-connectioncard-header")+'">'+O(a.kfa)+'</div><div class="'+Q("waffle-dataconnector-connectioncard-type")+'">'+O(a.I3a)+"</div></div></div>")};function Xje(){}r(Xje,ds);Xje.prototype.Ca=function(a){a=a.Ra();return N(Wje,{kfa:a.getName(),I3a:"SQL"})};Xje.prototype.Rb=m("waffle-dataconnector-connectioncard");wa(Xje);function Yje(a,b){es.call(this,void 0,Xje.getInstance(),b);this.Yb(a);this.hf(8,!0)}r(Yje,es);Yje.prototype.Yb=function(a){es.prototype.Yb.call(this,a)};function Zje(){var a='<div class="'+Q("waffle-dataconnector-connectionmanager-content")+'"><div class="'+Q("waffle-dataconnector-connectionmanager-header")+'">';a=a+"Choose a data source"+('</div><div class="'+Q("waffle-dataconnector-connectionmanager-connections")+'"></div></div>');return P(a)};function $je(a){I4.call(this,"waffle-dataconnector-connectionmanager",a);Aie(this,this.qa().Ca("SPAN",void 0,N(rie),"Managed data sources"));this.D=new M(this.qa());this.Ga(this.D);this.F=new LM;this.Ga(this.F);this.L=CZ.getInstance()}r($je,I4);$je.prototype.Ca=function(){I4.prototype.Ca.call(this);Fs(this.rb(),Zje);zie(this).appendChild(N(oie));this.F.render(this.Ja("waffle-dataconnector-connectionmanager-content"))};
$je.prototype.Ha=function(){var a=this;I4.prototype.Ha.call(this);this.D.Va(this.Ja("waffle-dataconnector-connectionmanager-connections"));this.getHandler().V(this.D,"action",this.J);ake(this,!0);gie(this.L).then(function(b){b=Uv(b,1);bke(a,b);ake(a,!1)},function(){ake(a,!1);jr.getInstance().postMessage(lr("Could not get managed data sources","error",!0))})};function ake(a,b){Tk(a.Oa(),"waffle-dataconnector-connectionmanager-loading",b);a.F.setActive(b)}
function bke(a,b){var c=a.Ja("waffle-dataconnector-connectionmanager-connections");if(0==b.length){var d=new or,e="You do not have access to any managed data sources. "+(d.ue("a",{"class":"goog-inline-block",href:"https://sites.google.com/corp/google.com/dataconnectors/home",target:"_blank"})+("Learn more"+d.xe("a")));b=a.qa();d=qe(b,d.format(e));b.appendChild(c,b.Ca("DIV","waffle-dataconnector-connectionmanager-no-connections-message",d));K(a.Ja("waffle-dataconnector-connectionmanager-header"),!1)}else{b=
ja(b);for(d=b.next();!d.done;d=b.next())d=new Yje(d.value),a.D.Ga(d),d.render(c);b=new jM("CREATE NEW DATA SOURCE");a.Ga(b);b.render(c);a.getHandler().V(b,"action",function(){rr("https://sites.google.com/corp/google.com/dataconnectors/home")})}}$je.prototype.J=function(a){a.stopPropagation();this.resolve(a.target.Ra())};function cke(){z.call(this);this.C={};this.D=new Qz}r(cke,z);function dke(a,b,c){a.C[b]=c}function eke(a,b){var c=ritz_api.DbxApi.getExecutionStatusForQuery(b);c=null==c?null:a.D.qd(Zz.Ba(),c);var d=a.C[b];return d?c&&d.getToken()==c.getToken()?(rc(a.C,b),c):d:c};function fke(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info")+" "+Q("waffle-dataconnector-pill-menuitem-accel")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-message")+'"></span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-progress")+'">';a=a+"Calculating size..."+('</span><span class="'+Q("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")+
'">');a+="Error estimating size";var b=P('<svg class="waffle-dataconnector-refresh-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><polygon points="0 0 18 0 18 18 0 18"/><path fill="#000" d="M9,13.5 C6.51,13.5 4.5,11.49 4.5,9 C4.5,6.51 6.51,4.5 9,4.5 C10.24,4.5 11.36,5.02 12.17,5.83 L10,8 L15,8 L15,3 L13.24,4.76 C12.15,3.68 10.66,3 9,3 C5.69,3 3.01,5.69 3.01,9 C3.01,12.31 5.69,15 9,15 C11.97,15 14.43,12.84 14.9,10 L13.38,10 C12.92,12 11.14,13.5 9,13.5 L9,13.5 Z"/></g></svg>');
a+="</span></span>"+O(b);return P(a+"Refresh query</div>")}
function gke(){var a='<div class="'+Q("waffle-dataconnector-pill-menuitem-editquery")+" "+Q("waffle-dataconnector-pill-menuitem")+'">';var b=P('<svg class="waffle-dataconnector-edit-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');a+=O(b);return P(a+
"Edit query</div>")}function hke(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-viewerror")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(sie({color:"#000000"},b));return P(a+"View error</div>")}function ike(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill-menuitem-bigquery-helpdoc")+" "+Q("waffle-dataconnector-pill-menuitem")+'">'+O(tie(null,b));return P(a+"Learn more about BigQuery</div>")}
function jke(a){var b='<div class="'+Q("waffle-dataconnector-pill-menuitem")+'"><span class="'+Q("waffle-dataconnector-pill-menuitem-truncation-bigquery-console")+" "+Q("waffle-dataconnector-pill-menuitem-accel")+'">';b=b+"View all in BigQuery"+("</span>"+O(a.message)+"</div>");return P(b)};function kke(a,b,c,d){Cn.call(this,N(fke),a,d);this.H=b;this.J=c;this.F=Om(new Nm,72).build();this.C=new es(void 0,Tl(ds,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"),this.qa());this.Ga(this.C);this.D=3==ritz_api.DbxApi.getTypeOfQuery(this.H)}r(kke,Cn);
kke.prototype.Ha=function(){Cn.prototype.Ha.call(this);J(this.Oa(),"waffle-dataconnector-pill-menuitem-refreshquery");this.C.Va(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"));this.NH();this.getHandler().V(this.C,"action",this.R)};
kke.prototype.NH=function(){K(this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info"),this.D);if(this.D){lke(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");var a=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");fd(a,dd)}mke(this)};kke.prototype.ih=function(a){if(a&&Nd(a.target)){var b=this.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info");if(ae(b,a.target))return!0}return Cn.prototype.ih.call(this,a)};
kke.prototype.R=function(a){a.stopPropagation();Ovb.xb(void 0,this.F)};function mke(a){a.D&&(lke(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-progress"),a.J.C(35737,a.F),nke(a).then(function(b){b=S(b,2);return oke(b).then(function(b){b=S(S(b,5),1);b=Cie(b);var c=a.Ja("waffle-dataconnector-pill-menuitem-refreshquery-info-message");fd(c,Zc(b));lke(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");uJ(b)},function(){return pke(a)})},function(){return pke(a)}))}
function pke(a){lke(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")}function nke(a){var b=new Nfd;U(b,1,a.H);return hie(CZ.getInstance(),b)}function oke(a){S(a,6);var b=new hZ;a=a.clone();U(b,1,a);U(b,2,1);U(b,4,!0);return cie(CZ.getInstance(),b)}
function lke(a,b){["waffle-dataconnector-pill-menuitem-refreshquery-info-message","waffle-dataconnector-pill-menuitem-refreshquery-info-progress","waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"].forEach(function(b){return K(a.Ja(b),!1)});K(a.Ja(b),!0);a.C.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"==b)};function qke(a,b,c){Cn.call(this,N(jke,{message:"Limit: "+(Bie.format(1E4)+" results")}),a,c);this.C=b;this.D=new Qz;this.Cea=null}r(qke,Cn);qke.prototype.Ha=function(){Cn.prototype.Ha.call(this);J(this.Oa(),"waffle-dataconnector-pill-menuitem-truncation");this.NH()};qke.prototype.NH=function(){Jvb.Na(!1);K(this.Ja("waffle-dataconnector-pill-menuitem-truncation-bigquery-console"),!1);this.Cea=null;rke(this)};
function rke(a){if(3==ritz_api.DbxApi.getTypeOfQuery(a.C)){var b=ske(a);if(b&&Mv(b,8)&&Mv(b,9)){var c=new zZ,d=S(b,8),e=S(b,9);U(c,2,d);U(c,1,e);jie(c).then(function(b){b.bt()&&(Jvb.Na(!0),K(a.Ja("waffle-dataconnector-pill-menuitem-truncation-bigquery-console"),!0),a.Cea=(new qo("https://console.cloud.google.com/bigquery")).qc("project",d).qc("j",e).qc("page","queryresults").toString())},va)}}}function ske(a){var b=ritz_api.DbxApi.getDbQueryForQueryId(a.C);return null==b?null:a.D.qd(Xz.Ba(),b)};function tke(a,b,c,d){c=void 0===c?!1:c;kY.call(this,Gs(uie,{opacity:.54}),new Hn(d),uke.getInstance(),d);this.H=a;this.ea=c;this.O=b;this.J=Pm(Om(new Nm,72),cje(ritz_api.DbxApi.getTypeOfQuery(this.H))).build();this.D={};this.D["refresh-query"]=new kke("refresh-query",this.H,this.O,this.qa());this.hd(this.D["refresh-query"]);this.D["edit-query"]=new Cn(N(gke),"edit-query",this.qa());this.hd(this.D["edit-query"]);this.D["view-error"]=new Cn(N(hke),"view-error",this.qa());this.hd(this.D["view-error"]);
this.D["menu-separator"]=new Gn(this.qa());this.hd(this.D["menu-separator"]);this.D.truncation=new qke("truncation",this.H,this.qa());this.hd(this.D.truncation);this.D["bigquery-helpdoc"]=new Cn(N(ike),"bigquery-helpdoc",this.qa());this.hd(this.D["bigquery-helpdoc"])}r(tke,kY);tke.prototype.Ha=function(){kY.prototype.Ha.call(this);J(this.Vb().getElement(),"waffle-dataconnector-pill-menu");MGc(this,new Tm(this.Oa(),this.ea?4:0));this.Qx=!0;this.getHandler().V(this.Vb(),"action",this.ma)};
tke.prototype.ma=function(a){a=a.target;var b=a.Ra(),c=vke[b];if(c&&c.isEnabled()){var d;"truncation"==b&&(d=a.Cea);c.xb(d,this.J)}};
tke.prototype.refresh=function(a){var b=[];switch(a){case 2:b.push("edit-query");b.push("refresh-query");break;case 3:b.push("view-error")}b.push("menu-separator");b.push("truncation");3==ritz_api.DbxApi.getTypeOfQuery(this.H)&&b.push("bigquery-helpdoc");a=ja(Object.values(this.D));for(var c=a.next();!c.done;c=a.next())c.value.setVisible(!1);b=ja(b);for(a=b.next();!a.done;a=b.next())this.D[a.value].setVisible(!0)};
tke.prototype.Hd=function(a,b){var c=this.Vb();if(c&&c.sb()&&a){c=ja(Object.values(this.D));for(var d=c.next();!d.done;d=c.next())d=d.value,d.NH&&d.NH()}kY.prototype.Hd.call(this,a,b)};var wke={},vke=(wke["bigquery-helpdoc"]=zvb,wke["edit-query"]=Evb,wke["refresh-query"]=Mvb,wke.truncation=Jvb,wke["view-error"]=Ovb,wke);function uke(){}r(uke,Y9c);uke.prototype.Kq=function(a){return a.Ca("DIV",{style:"display:none;"})};wa(uke);function xke(a,b,c){b=c||b;a='<div class="'+Q("waffle-dataconnector-pill")+'" tabindex="0"><div class="'+Q("waffle-dataconnector-pill-info")+'"><div class="'+Q("waffle-dataconnector-pill-timestamp")+'"></div><div class="'+Q("waffle-dataconnector-pill-progress")+'"><div class="'+Q("waffle-dataconnector-pill-spinner")+'"></div><span class="'+Q("waffle-dataconnector-pill-progress-message")+'">';a=a+"Running query..."+(' </span></div><div class="'+Q("waffle-dataconnector-pill-error")+'">'+O(sie(null,
b)));a=a+"Execution error"+('</div></div><div class="'+Q("waffle-dataconnector-pill-editquery-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-refresh-button-wrapper")+'"></div><div class="'+Q("waffle-dataconnector-pill-menu-button-wrapper")+'"></div></div>');return P(a)};function yke(a,b,c,d,e,f,h,k){h=void 0===h?!1:h;M.call(this,k);this.O=a;this.Ka=b;this.Da=c;this.H=h;this.R=d;this.va=e;this.ma=f;b=ritz_api.DbxApi.getTypeOfQuery(a);this.L=Pm(Om(new Nm,72),cje(b)).build();this.ea=new zke;this.J=new Bm;this.Aa(this.J);this.F=new GV;this.Ga(this.F);this.F.Gd("waffle-dataconnector-pill-editquery-button");Fm(this.J,this.F,Evb,Hm,void 0,this.L);this.D=new GV("Refresh");this.D.Gd("waffle-dataconnector-pill-refresh-button");this.Ga(this.D);this.C=new tke(a,this.va,this.H,
this.qa());this.C.Gd("waffle-dataconnector-pill-menu-button");this.Ga(this.C);this.Fa=new Qz}r(yke,M);p=yke.prototype;p.Ca=function(){this.kb(N(xke))};
p.Ha=function(){var a=this;M.prototype.Ha.call(this);Jk(this.Oa(),"toolbar");var b=this.getId()+":label";this.Ja("waffle-dataconnector-pill-info").id=b;Kk(this.Oa(),"labelledby",b);this.F.render(this.Ja("waffle-dataconnector-pill-editquery-button-wrapper"));this.D.render(this.Ja("waffle-dataconnector-pill-refresh-button-wrapper"));this.C.render(this.Ja("waffle-dataconnector-pill-menu-button-wrapper"));vm(this.C.Oa(),"More options",void 0);this.getHandler().V(this.D,"action",this.fyb).V(this.Oa(),
"keydown",function(a){var b=a.keyCode;37!=b&&39!=b||a.preventDefault()});B.Rp&&B.product.Op&&this.getHandler().V(this.Oa(),"focus",function(){dl(a.Oa(),{outline:"1px dotted black"})}).V(this.Oa(),"blur",function(){dl(a.Oa(),{outline:"0"})});this.refresh();b=new ER(this.Oa(),this.qa());this.Aa(b);FR(b)};p.Ia=function(){M.prototype.Ia.call(this)};p.dd=function(){this.Da.dd(this.Oa(),this.H?5:1,new Zk(0,this.H?50:0,12,this.H?0:50))};
p.refresh=function(){var a=eke(this.R,this.O);a=a?a.getState():2;var b=Fvb.isEnabled()&&I(this.ma,"fedct");switch(a){case 5:case 1:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!0);K(this.Ja("waffle-dataconnector-pill-error"),!1);this.F.setVisible(!1);this.D.setVisible(!1);this.D.Na(!1);this.C.setVisible(!1);break;case 4:case 2:K(this.Ja("waffle-dataconnector-pill-timestamp"),!0);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),
!1);Ake(this);this.F.setVisible(!1);this.D.setVisible(b);this.D.Na(b);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);break;case 3:K(this.Ja("waffle-dataconnector-pill-timestamp"),!1);K(this.Ja("waffle-dataconnector-pill-progress"),!1);K(this.Ja("waffle-dataconnector-pill-error"),!0);this.F.setVisible(b);this.D.setVisible(!1);this.D.Na(!1);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);b||(K(this.Ja("waffle-dataconnector-pill-timestamp"),!0),K(this.Ja("waffle-dataconnector-pill-error"),
!1),Ake(this));break;default:aPc("Unrecognized execution state: "+a)}this.dd()};
function Ake(a){var b=ritz_api.DbxApi.getDbQueryForSheet(a.Ka);b=null==b?null:a.Fa.qd(Xz.Ba(),b);if(null!=b){var c=S(b,3)||0;0>=c||(c=a.ea.format(c),a=a.Ja("waffle-dataconnector-pill-timestamp"),S(b,7)?(b="Limited to "+(Bke.format(S(b,6))+(" rows, "+c)),de(a,b)):Mv(b,6)?(b=(new $u("{totalRows, plural, =0 {No rows, {formattedDateTime}}=1 {1 row, {formattedDateTime}}other {# rows, {formattedDateTime}}}")).format({totalRows:S(b,6),formattedDateTime:c}),de(a,b)):de(a,"Updated "+c))}}
p.fyb=function(){this.D.Na(!1);Mvb.xb(void 0,this.L)};p.focus=function(){this.Oa().focus()};var Bke=new Yu(1);function zke(){this.C=new Su(1);this.D=new Su(Vu.MONTH_DAY_ABBR);this.F=new Su(7)}zke.prototype.format=function(a){a=new Date(a);var b=new Date;return 0<b.getFullYear()-a.getFullYear()?this.C.format(a):a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?this.F.format(a):this.D.format(a)};function Cke(a,b,c,d,e,f,h){z.call(this);this.D=a;this.H=b;this.L=c;this.ma=d;this.J=e;this.Ma=new Wk(this);this.Aa(this.Ma);this.F=new we(this);this.Aa(this.F);this.R=f;this.ea=h;this.O=H();this.C=null;this.Ma.V(this.L,"F",this.IKb).V(this.D,"gb",this.JKb).V(this.D,"hb",this.rAb).V(this.ma,"db-execution-status-updated",this.HKb).V(this.D,"zb",this.refresh);this.F.subscribe(Gvb,"action",this.Kpb)}r(Cke,z);p=Cke.prototype;p.Ia=function(){z.prototype.Ia.call(this);A(this.C)};p.refresh=function(){Dke(this)};
p.IKb=function(){this.C&&this.C.dd()};p.JKb=function(){Dke(this)};p.rAb=function(){A(this.C);this.C=null};p.Kpb=function(){this.C&&(this.C.focus(),this.R.ub(2))};function Dke(a){var b=a.D.C.C;if(b&&TJ(b))if(a.C)a.C.refresh();else{var c=IJ(a.H);if(c){b=c.qe();c=new Tm(c.Ka.J,b?5:1);var d=a.D.C.C,e=S(d.H,1);d=d.jb();a.C=new yke(e,d,c,a.J,a.ea,a.O,b);a.C.render()}}}p.HKb=function(a){a.F&&0!=a.F.length&&this.C&&cb(a.F,this.C.O)&&this.C.refresh()};function Eke(a,b,c,d){var e="Error in query on "+c;c=new Vje;c.Gd("waffle-dataconnector-error-popup");jt(c,e);c.C.setContent("Open query editor");c.J.setContent("Ok");a=10==a.getErrorCode()?bje(d):Wie(b,a);kt(c,a);return c};function Fke(a,b,c,d,e,f,h,k,l){Nje.call(this,a,d,f,h,k,l);this.H=new cke;this.Aa(this.H);this.D=b;this.J=new Cke(b,c,d,a,this.H,e,l);this.Aa(this.J);this.Ma=new Wk(this);this.Aa(this.Ma);this.ma=new hje;this.Aa(this.ma);this.Ma.V(this.C.D,["show","hide"],this.Ymb);this.Ma.V(this.C.D,["kh"],this.$rb);this.J.refresh()}r(Fke,Nje);p=Fke.prototype;
p.Twa=function(a){var b=this,c=wqc(),d=new iv(GT.concat(["waffle-dataconnector-connection-selected"])),e=new iv(["waffle-dataconnector-active-sheet-db-connection","embedded-object-unfocused"]),f=GT.concat(["waffle-dataconnector-active-sheet-db-connection","sheet-access-no-protected-range-for-sheet"]);c||f.push("waffle-dataconnector-active-sheet-not-plx");c=new iv(f);a.C(oF,HT).F(oF,HT).C(pF,HT).F(pF,HT).C(Mvb,c).C(Evb,c).C(qF,HT).C(Nvb,d).C(Kvb,c).C(Ovb,c).C(Gvb,e);a.C(Fvb,c);this.O.yb(Fvb,Pa,function(){b.J.refresh()});
I(H(),"fedp")&&a.C(Cvb,HT).F(Cvb,HT).C(Dvb,HT).F(Dvb,HT)};p.FRa=function(){this.O.subscribe(qF,"action",this.FHa).subscribe(oF,"action",this.Zlb).subscribe(Cvb,"action",this.Ylb).subscribe(Mvb,"action",this.dyb).subscribe(Evb,"action",this.Aoa).subscribe(pF,"action",this.pob).subscribe(Kvb,"action",this.uvb).subscribe(Ovb,"action",this.Aoa).yb(Dvb,Qa,this.gqb).subscribe(Jvb,"action",this.qvb)};p.Ymb=function(){var a=Kie(this.C);a&&a.isVisible()||(qF.setValue(null),Nvb.setValue(null))};
p.kNa=function(a){var b=this;a=void 0===a?!1:a;var c=new $je;this.Aa(c);J4(this.C,c,!a);c.getResult().then(function(c){var d=a,f=c.getId();c=c.getName();if(d){Mie(b.C);d=Kie(b.C);d.hc=f;d.Sa=!0;-1!=fe(zie(d)).indexOf("A managed data source is missing under query settings")&&L4(d,bd("span"));var h=d.L;h.F=c;de(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),c);Tk(h.Ja("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),"waffle-dataconnector-jdbc-query-settings-widget-connection-name-error",
!1);d.L.Hd(!0);d.Td.J(f);Jje(d.mb);d.OH()}else Gke(b,f,c)},function(){Mie(b.C)})};p.tRb=function(){Hke(this,[],!1)};function Gke(a,b,c){a.L.addCallback(function(d){d=d.Gcb(b,c);a.Aa(d);J4(a.C,d)})}p.Zlb=function(a){Ike(this,1,a)};p.Ylb=function(a){Ike(this,2,a)};function Ike(a,b,c){var d=Kie(a.C);U(c,2,b);bie(a.F,c).then(function(c){Jke(a,c);2==b&&OEb()},function(a){d.isDisposed()||oje(d,a)});tje(d)}
function Jke(a,b){dke(a.H,S(b,2),b.Gi());var c=b.jb();Lie(a.C);Kke(a,c);uL(a.D,c)?xL(a.D.C)==c?a.J.refresh():zL(a.D,c,void 0,{xD:!0}):a.Ma.Jc(a.D,["rb","gb"],function(b){"rb"==b.type&&b.Sh==c&&zL(a.D,c,void 0,{xD:!0})})}p.dyb=function(){Hke(this,[hO(this.D.C)],!0)};function Hke(a,b,c){var d=new rfd;b.forEach(function(a){Sv(d,1,a)});die(a.F,d).then(function(b){Lke(a,Uv(b,1));a.J.refresh()},function(b){return Mke(a,b,c)})}
function Mke(a,b,c){var d=[],e=[];Uv(b,1).forEach(function(a){return 3==a.Gi().getState()?e.push(a):d.push(a)});Lke(a,d);a.J.refresh();c&&(b=e[0],c=b.Gi(),c.getErrorCode(),Nke(a,b.jb(),c))}function Lke(a,b){b.forEach(function(b){var c=uL(a.D,b.jb());if(c=c&&c.H)c=S(c,1),b=b.Gi(),a.H.C[c]=b})}
p.gqb=function(){var a=this,b=new xZ,c=dJb(cL(this.D.getActiveGrid().Dc())),d=hO(this.D.C);U(b,1,3);U(b,2,d);aie(b,UIb(c));eie(this.F,b).then(function(b){var c=S(b,2);b=b.Gi();a.H.C[c]=b},function(b){Nke(a,d,b.Gi())})};
function Nke(a,b,c){var d=uL(a.D,b),e=d&&d.H;if(e){d=d.re();e=ritz_api.DbxApi.getTypeOfQuery(S(e,1));var f="waffle-dataconnector-ssologin-"+$b(),h=Eke(c,e,d,f);a.Aa(h);a.R.oi(h);h.render();h.setVisible(!0);h.getResult().then(function(){A(h);a.Aoa(b)},function(){A(h)});(c=Ed(f))&&N4.prototype.getHandler.call(h).V(c,"click",function(){Oke(a,b,h)})}}function Oke(a,b,c){ije(a.ma,function(){A(c);Hke(a,[b],!0)})}
p.Aoa=function(a){if((a=void 0!==a?uL(this.D,a):this.D.C.C)&&TJ(a)){var b=a.H;a=S(b,1);switch(ritz_api.DbxApi.getTypeOfQuery(a)){case 2:Pke(this,a);break;case 1:b=S(b,2);Qke(this,b,a);break;case 3:Rke(this,a)}}};
function Qke(a,b,c){var d=Ske(a,c),e=Tke(a,b),f=Uke(a,c);a.L.addCallback(function(h){var k=Qje("Loading query...");Ue([d,e,f]).then(function(d){var e=d[0],f=d[1]?d[1]:null;f=f?f.getName():null;d=h.Kcb(b,f,c,e,d[2]?d[2]:null);a.Aa(d);kr(jr.getInstance(),k);J4(a.C,d)},function(){kr(jr.getInstance(),k);Tje("Could not load query")})})}
function Pke(a,b){var c=Ske(a,b),d=Uke(a,b);a.L.addCallback(function(e){var f=Qje("Loading query...");Ue([c,d]).then(function(c){c=e.Lcb(b,c[0],c[1]?c[1]:null);a.Aa(c);kr(jr.getInstance(),f);J4(a.C,c)},function(){kr(jr.getInstance(),f);Tje("Could not load query")})})}
function Rke(a,b){var c=Iie(new Hie(a.F)),d=Ske(a,b),e=Uke(a,b);a.L.addCallback(function(f){var h=Qje("Connecting to BigQuery...");Ue([d,e,c]).then(function(c){var d=c[0],e=c[1]?c[1]:null;c=c[2];var k=S(d,4).Hl();c=new nie(c,k);d=f.Jcb(c,b,d,e);kr(jr.getInstance(),h);J4(a.C,d)},function(){kr(jr.getInstance(),h);Tje("Could not load query")})})}function Ske(a,b){var c=Ve(),d=new Nfd;U(d,1,b);hie(a.F,d).then(function(a){c.resolve(S(a,2))},function(a){return c.reject(a)});return c.C}
function Tke(a,b){var c=Ve(),d=new Ufd;U(d,1,b);kie(a.F,d).then(function(a){c.resolve(S(a,1))},function(){return c.resolve(null)});return c.C}function Uke(a,b){var c=eke(a.H,b);if(!c||3!=c.getState())return Se(null);c=new Rfd;U(c,1,b);return a.F.Gi(c).then(function(a){return a.Gi()})}
p.pob=function(a){var b=this,c=S(a,1),d=Kie(this.C);fie(this.F,a).then(function(a){a=a.Gi();b.H.C[c]=a;a=ritz_api.DbxApi.getSheetIdForQuery(c);zL(b.D,a,void 0,{xD:!0});Lie(b.C);b.J.refresh()},function(a){d.isDisposed()||oje(d,a)});tje(d)};p.uvb=function(){var a=this,b=this.D.C.C,c=S(b.H,1),d=new Rfd;U(d,1,c);this.F.Gi(d).then(function(c){(c=c.Gi())&&3==c.getState()&&Nke(a,b.jb(),c)})};p.$rb=function(){this.kNa(!0)};p.qvb=function(a){rr(a)};
function Kke(a,b){a=a.va.Ab;var c=new Xw,d=b8b(b,0,0);U(c,1,d);b=EB(b,0,0,1,1);Sv(c,2,b);a.dispatchEvent(new mie(new Ww(c)))};function Vke(a,b){wJ.call(this,139);this.C=a||"";this.D=b}r(Vke,wJ);Vke.prototype.Od=function(){var a=new BEb;U(a,1,this.C);U(a,2,this.D);return a};function Wke(a,b,c,d,e,f,h,k,l){Nje.call(this,a,c,e,f,h,k);this.H=l}r(Wke,Nje);Wke.prototype.Twa=function(a){a.C(oF,HT).F(oF,HT).C(qF,HT)};Wke.prototype.FRa=function(){this.O.subscribe(qF,"action",this.FHa).subscribe(oF,"action",this.D)};
Wke.prototype.D=function(a){var b=S(a,1);a=new cD;switch(S(b,6)){case 3:var c=new dD,d=S(S(b,4),1);U(c,1,d);b=S(b,4).Hl();U(c,3,b);U(a,3,c);break;case 2:c=new eD;(d=S(S(b,2),1))?(U(c,1,d),b=S(S(b,2),2),U(c,2,b)):(b=S(S(b,2),3),U(c,3,b));U(a,4,c);break;default:throw Error("Unknown data connector type: "+S(b,6));}this.H.C(new Vke(null,a));Lie(this.C)};function Xke(){z.call(this)}r(Xke,IE);Xke.prototype.C=function(){return Fke};Xke.prototype.D=function(){return Wke};PE("dataconnector",Xke);
